---
import { getCollection } from 'astro:content'
import BaseLayout from "@/layouts/BaseLayout.astro";
import { ServiceCarousel } from "@/components/ServiceCarousel"
import { TestimonialCarousel } from "@/components/TestimonialCarousel"
import { ContactForm } from "@/components/ContactForm"
import headshot from '../../public/headshot.jpg'

const services = await getCollection('services');
const testimonials = await getCollection('testimonials');
---

<BaseLayout>

  {/* --- ABOUT --- */}
  <section class="px-4 sm:px-6 lg:px-12 pt-8 lg:pt-10 pb-6 lg:pb-10">

    {/* Asymmetric grid: title + headshot + credentials | bio + CTA + carousel */}
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-0 items-start">

      {/* Left — hero lockup + headshot + structured credentials */}
      <div class="lg:col-span-5 flex flex-col gap-5">
        <span class="fd-label block">ABOUT</span>
        <div class="fd-tutor-lockup">
          <img class="fd-tutor-lockup-img" alt="headshot" src={headshot.src}>
          <div class="fd-tutor-lockup-text">
            <h2 class="fd-tutor-name">SAKETH<br/>THOTA</h2>
            <span class="fd-tutor-role">PRIVATE TUTOR</span>
          </div>
        </div>
        <div class="flex flex-col gap-2">
          <div class="fd-credential">
            <span class="fd-credential-key">EXPERIENCE</span>
            <span class="fd-credential-val">7+ years</span>
          </div>
          <div class="fd-credential">
            <span class="fd-credential-key">SUBJECTS</span>
            <span class="fd-credential-val">Math, Computer Science, Standardized Testing</span>
          </div>
          <div class="fd-credential">
            <span class="fd-credential-key">FORMAT</span>
            <span class="fd-credential-val">In-Person, Hybrid, Online</span>
          </div>
          <div class="fd-credential">
            <span class="fd-credential-key">STUDENTS</span>
            <span class="fd-credential-val">All ages — HS through college</span>
          </div>
        </div>
      </div>

      {/* Right — bio + CTA + services carousel + testimonials with vertical divider */}
      <div class="lg:col-span-7 lg:pl-8">
        <div class="lg:border-l-[3px] lg:border-[var(--fd-fg)] lg:pl-8 flex flex-col gap-4">
          <p class="fd-body-text">
            I have 7+ years of experience as a private tutor and teaching assistant, and I have a love for making tough topics click. I help students master everything from high school math and standardized testing to college-level computer science, with a patient approach tailored to each student.
          </p>
          <a href="#contact" class="fd-btn" style="width: fit-content;">Book a Session &rarr;</a>

          {/* Services carousel */}
          <div style="height: 1px; background-color: var(--fd-border-light); margin-top: 0.25rem;"></div>
          <div class="flex flex-col gap-2">
            <span class="fd-label">SERVICES</span>
            <ServiceCarousel client:load services={services.map(service=>service.data.properties)}/>
          </div>

          {/* Testimonials */}
          <div style="height: 1px; background-color: var(--fd-border-light); margin-top: 0.25rem;"></div>
          <div class="flex flex-col gap-2">
            <span class="fd-label">TESTIMONIALS</span>
            <TestimonialCarousel client:load testimonials={testimonials.reverse().map(t => t.data)} />
          </div>
        </div>
      </div>

    </div>
  </section>

  <div class="fd-rule-thick"></div>

  {/* --- CONTACT --- */}
  <section id="contact" class="px-4 sm:px-6 lg:px-12 scroll-mt-8">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-0">

      {/* Left — info, narrower */}
      <div class="lg:col-span-5 pt-10 lg:pt-14 pb-4 lg:pb-14">
        <span class="fd-label block mb-6">CONTACT</span>
        <h3 class="fd-sub-heading mb-4">Get in Touch</h3>
        <p class="fd-body-text mb-6">If none of my services match what you're looking for just drop a message and I'll be in contact within 24 hours.</p>
        <div class="flex flex-col gap-1">
          <p class="fd-contact-name">Saketh Thota</p>
          <p class="fd-contact-detail">sakeththota01@gmail.com</p>
          <p class="fd-contact-detail">(269) 873-7150</p>
        </div>
      </div>

      {/* Right — form, wider */}
      <div class="lg:col-span-7 pb-10 lg:py-14 lg:pl-8">
        <div class="lg:border-l-[3px] lg:border-[var(--fd-fg)] lg:pl-8">
          <ContactForm client:load />
        </div>
      </div>

    </div>
  </section>
</BaseLayout>
