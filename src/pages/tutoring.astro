---
import { getCollection } from 'astro:content'
import BaseLayout from "@/layouts/BaseLayout.astro";
import { ServiceCarousel } from "@/components/ServiceCarousel"
import { ContactForm } from "@/components/ContactForm"
import TestimonialCard from '@/components/TestimonialCard.astro';
import headshot from '../../public/headshot.jpg'

const services = await getCollection('services'); // tutoring services
const testimonials = await getCollection('testimonials') // testimonials
---

<BaseLayout>
    <h1 class="fd-page-heading">Book with Me!</h1>
    <div class="flex flex-col-reverse gap-8 md:flex-row md:flex justify-between items-center md:items-start">
        <p class="fd-body-text md:w-3/5">I have 7+ years of experience as a private tutor / teaching assistant, and I have a love for making tough topics click. I help students master everything from HS math and standardized testing to college-level computer science course, and I'm comfortable working with all ages.</p>
        <div class="flex w-2/5 justify-center">
            <img class="fd-headshot" alt="headshot" src={headshot.src}>
        </div>
    </div>

    <div class="fd-section-rule" style="margin: 2.5rem 0;"></div>

    <div class="flex flex-col gap-16 pt-8 pb-16">
        <div class="flex justify-center px-4 sm:px-12">
            <div class="w-full md:w-9/12 container">
                <ServiceCarousel client:load services={services.map(service=>service.data.properties)}/>
            </div>
        </div>
        <div class="flex flex-col items-center lg:flex-row gap-8">
            {testimonials.reverse().map((testimonial) => {
                return <TestimonialCard {...testimonial.data} />
            })}
        </div>
    </div>

    {/* --- Contact --- */}
    <div id="contact" class="flex flex-col items-center gap-16 lg:gap-4 lg:flex-row lg:items-start lg:justify-between scroll-mt-8">
        <div class="w-full lg:w-2/5">
            <h3 class="fd-sub-heading mb-4">Get in Touch</h3>
            <p class="fd-body-text mb-4">If none of my services match what you're looking for just drop a message and i'll be in contact within 24 hours!</p>
            <p class="fd-contact-name mt-4">Saketh Thota</p>
            <p class="fd-contact-detail mt-1">sakeththota01@gmail.com</p>
            <p class="fd-contact-detail mt-1">(269) 873-7150</p>
        </div>
        <div class="flex w-full md:w-2/3 lg:w-1/2">
            <ContactForm client:load />
        </div>
    </div>
</BaseLayout>
